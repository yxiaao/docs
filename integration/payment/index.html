
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../../cdi/merchant%20data%20file%20specification/">
      
      
        <link rel="next" href="../alipay%20service%20window%20h5/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.3">
    
    
      
        <title>Payment - QFPay Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.50c56a3b.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-XXXXXXXXXX"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-XXXXXXXXXX",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  

  <meta name="robots" content="noindex,noarchive,nofollow" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

  <link
    rel="stylesheet"
    href="../../assets/stylesheets/custom.css"
  />

  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#payment" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="QFPay Docs" class="md-header__button md-logo" aria-label="QFPay Docs" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            QFPay Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Payment
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../pos/ecr/" class="md-tabs__link">
          
  
  POS

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../subscription/integration/" class="md-tabs__link">
          
  
  Subscription

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../cdi/integration/" class="md-tabs__link">
          
  
  CDI

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
  Payment API

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="https://checkout-sdk.qfapi.com/" class="md-tabs__link">
        
  
    
  
  Checkout Page

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="https://android-sdk.qfapi.com/" class="md-tabs__link">
        
  
    
  
  Android SDK

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="QFPay Docs" class="md-nav__button md-logo" aria-label="QFPay Docs" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    QFPay Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    POS
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            POS
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pos/ecr/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ECR integration technical specification (archived version 20231218)
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Subscription
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Subscription
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../subscription/integration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    QFPay Subscription API
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    CDI
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            CDI
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cdi/integration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CDI Integration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cdi/test%20values/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Test values
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cdi/transaction%20data%20file%20specification/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Transaction data file specification
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cdi/merchant%20data%20file%20specification/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Merchant data file specification
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Payment API
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Payment API
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Payment
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Payment
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#paytype-table" class="md-nav__link">
    <span class="md-ellipsis">
      PayType Table
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#currencies" class="md-nav__link">
    <span class="md-ellipsis">
      Currencies
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api-endpoint-for-payments" class="md-nav__link">
    <span class="md-ellipsis">
      API Endpoint for Payments
    </span>
  </a>
  
    <nav class="md-nav" aria-label="API Endpoint for Payments">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#http-request" class="md-nav__link">
    <span class="md-ellipsis">
      HTTP Request
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#public-payment-request-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Public Payment Request Parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#public-payment-response-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Public Payment Response Parameters
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#transaction-status-codes" class="md-nav__link">
    <span class="md-ellipsis">
      Transaction Status Codes
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../alipay%20service%20window%20h5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Alipay Service Window H5
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Transaction%20Enquiry/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Transaction Enquiry
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://checkout-sdk.qfapi.com/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Checkout Page
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://android-sdk.qfapi.com/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Android SDK
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="payment">Payment<a class="headerlink" href="#payment" title="Permanent link">&para;</a></h1>
<h2 id="paytype-table">PayType Table<a class="headerlink" href="#paytype-table" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th>Code</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>800008</td>
<td>Consumer Present QR Code Mode (CPM) for WeChat, Alipay, UNIONPAY Quick Pass</td>
</tr>
<tr>
<td>800101</td>
<td>Alipay Merchant Presented QR Code Payment in store (MPM) (Overseas Merchants)</td>
</tr>
<tr>
<td>800108</td>
<td>Alipay Consumer Presented QR Code Payment (CPM) (Overseas &amp; HK Merchants)</td>
</tr>
<tr>
<td>801101</td>
<td>Alipay Online WEB (in browser Chrome etc.) Payment (Overseas Merchants) **</td>
</tr>
<tr>
<td>801107</td>
<td>Alipay Online WAP (in mobile browser Chrome etc.) Payment (Overseas Merchants)</td>
</tr>
<tr>
<td>801110</td>
<td>Alipay in-APP Payments (Overseas Merchants)</td>
</tr>
<tr>
<td>800107</td>
<td>Alipay Service Window H5 Payment (in Alipay APP H5 payments)</td>
</tr>
<tr>
<td>801501</td>
<td>Alipay Merchant Presented QR Code (MPM) Payment (HK Merchants)</td>
</tr>
<tr>
<td>801510</td>
<td>Alipay In-App Payment (HK Merchants)</td>
</tr>
<tr>
<td>801512</td>
<td>Alipay Online WAP Payment (HK Merchants)</td>
</tr>
<tr>
<td>801514</td>
<td>Alipay Online WEB Payment (HK Merchants)</td>
</tr>
<tr>
<td>800201</td>
<td>WeChat Merchant Presented QR Code Payment (MPM) (Overseas &amp; HK Merchants)</td>
</tr>
<tr>
<td>800208</td>
<td>WeChat Consumer Presented QR Code Payment (CPM) (Overseas &amp; HK Merchants)</td>
</tr>
<tr>
<td>800207</td>
<td>WeChat JSAPI Payment - WeChat Official Account Payment (in Wechat App)(Overseas &amp; HK Merchants)</td>
</tr>
<tr>
<td>800212</td>
<td>WeChat JSAPI Payment - WeChat Official Account Payment (in Wechat App)(CA Merchants)****</td>
</tr>
<tr>
<td>800210</td>
<td>WeChat in-APP Payment (Overseas &amp; HK Merchants)</td>
</tr>
<tr>
<td>800213</td>
<td>WeChat Mini-Program Payment (Overseas &amp; HK Merchants)</td>
</tr>
<tr>
<td>801008</td>
<td>WeChat Pay HK Consumer Presented QR Code Payment (CPM) (Direct Settlement, HK Merchants)</td>
</tr>
<tr>
<td>801010</td>
<td>WeChat Pay HK In-App Payment (Direct Settlement, HK Merchants)</td>
</tr>
<tr>
<td>805801</td>
<td>PayMe Merchant Presented QR Code Payment in store (MPM) (HK Merchants)</td>
</tr>
<tr>
<td>805808</td>
<td>PayMe Consumer Presented QR Code Payment (CPM) (HK Merchants)</td>
</tr>
<tr>
<td>805814</td>
<td>PayMe Online WEB (in browser Chrome etc.) Payment (HK Merchants)</td>
</tr>
<tr>
<td>805812</td>
<td>PayMe Online WAP (in mobile browser Chrome etc.) Payment (HK Merchants)</td>
</tr>
<tr>
<td>805810</td>
<td>PayMe In-App Payment (HK Merchants)</td>
</tr>
<tr>
<td>800701</td>
<td>UNIONPAY Quick Pass Merchant Presented QR Code Payment (MPM)</td>
</tr>
<tr>
<td>800708</td>
<td>UNIONPAY Quick Pass Consumer Presented QR Code Payment (CPM)</td>
</tr>
<tr>
<td>801208</td>
<td>LINEPAY dynamic QRC Payment - Consumer Present Mode (CPM) (TH Merchants)</td>
</tr>
<tr>
<td>801301</td>
<td>LINEPAY Online Payment (TH Merchants)</td>
</tr>
<tr>
<td>801408</td>
<td>AIRPAY dynamic QRC Payment - Consumer Present Mode (CPM) (TH Merchants)</td>
</tr>
<tr>
<td>801701</td>
<td>NETSPAY Merchant Presented QR Code Payment (MPM)</td>
</tr>
<tr>
<td>801801</td>
<td>Alipay Pre-Authorization dynamic QRC Payment - Consumer Present Mode (CPM)</td>
</tr>
<tr>
<td>801808</td>
<td>Alipay Pre-Authorization dynamic QRC Payment - Merchant Present Mode (MPM)</td>
</tr>
<tr>
<td>801810</td>
<td>Alipay Pre-Authorization in-APP Payment</td>
</tr>
<tr>
<td>801814</td>
<td>Alipay Pre-Authorization Online Payment</td>
</tr>
<tr>
<td>801908</td>
<td>Origami Consumer Presented QR Code Payment (CPM)</td>
</tr>
<tr>
<td>802001</td>
<td>FPS Merchant Presented QR Code Payment (MPM) (HK Merchants)***</td>
</tr>
<tr>
<td>802201</td>
<td>AIRPAY Online Payment (TH Merchants)</td>
</tr>
<tr>
<td>802301</td>
<td>PayNow Merchant Presented QR Code Payment (MPM) (SG Merchants)***</td>
</tr>
<tr>
<td>802901</td>
<td>PromptPay dynamic QRC Payment - Merchant Present Mode (MPM) (TH Merchants)***</td>
</tr>
<tr>
<td>803001</td>
<td>eWallet dynamic QRC Payment - Merchant Present Mode (MPM)</td>
</tr>
<tr>
<td>803008</td>
<td>eWallet dynamic QRC Payment - Consumer Present Mode (CPM)</td>
</tr>
<tr>
<td>803101</td>
<td>VIA dynamic QRC Payment - Merchant Present Mode (MPM) (JP and HK Merchants)</td>
</tr>
<tr>
<td>803108</td>
<td>VIA dynamic QRC Payment - Consumer Present Mode (CPM) (JP and HK Merchants)</td>
</tr>
<tr>
<td>803208</td>
<td>Touch 'n Go (TNG) dynamic QRC Payment - Consumer Present Mode (CPM) (MY Merchants)</td>
</tr>
<tr>
<td>803214</td>
<td>Touch 'n Go (TNG) Online Payment (MY Merchants)**</td>
</tr>
<tr>
<td>803301</td>
<td>Razer dynamic QRC Payment - Merchant Present Mode (MPM) (MY Merchants)</td>
</tr>
<tr>
<td>803308</td>
<td>Razer dynamic QRC Payment - Consumer Present Mode (CPM) (MY Merchants)</td>
</tr>
<tr>
<td>803314</td>
<td>Razer Online Payment ** (MY Merchants)</td>
</tr>
<tr>
<td>803701</td>
<td>Octopus dynamic QRC Payment - Merchant Present Mode (MPM) (HK Merchants)</td>
</tr>
<tr>
<td>803712</td>
<td>Octopus WAP Payment (HK Merchants)</td>
</tr>
<tr>
<td>803801</td>
<td>Dash dynamic QRC Payment - Merchant Present Mode (MPM) (SG Merchants)</td>
</tr>
<tr>
<td>803808</td>
<td>Dash dynamic QRC Payment - Consumer Present Mode (CPM) (SG Merchants)</td>
</tr>
<tr>
<td>804001</td>
<td>Boost dynamic QRC Payment - Merchant Present Mode (MPM) (MY Merchants)</td>
</tr>
<tr>
<td>804008</td>
<td>Boost dynamic QRC Payment - Consumer Present Mode (CPM) (MY Merchants)</td>
</tr>
<tr>
<td>804014</td>
<td>Boost Online Payment (MY Merchants)**</td>
</tr>
<tr>
<td>804101</td>
<td>Maybank dynamic QRC Payment - Merchant Present Mode (MPM) (MY Merchants)</td>
</tr>
<tr>
<td>804108</td>
<td>Maybank dynamic QRC Payment - Consumer Present Mode (CPM) (MY Merchants)</td>
</tr>
<tr>
<td>804114</td>
<td>Maybank Online Payment (MY Merchants)**</td>
</tr>
<tr>
<td>804201</td>
<td>GrabPay dynamic QRC Payment - Merchant Present Mode (MPM) (MY and SG Merchants)</td>
</tr>
<tr>
<td>804208</td>
<td>GrabPay dynamic QRC Payment - Consumer Present Mode (CPM) (MY Merchants)</td>
</tr>
<tr>
<td>804214</td>
<td>GrabPay Online Payment (MY Merchant)*<em> (SG Merchants)</em></td>
</tr>
<tr>
<td>805208</td>
<td>TrueMoney dynamic QRC Payment - Consumer Present Mode (CPM) (TH Merchants)</td>
</tr>
<tr>
<td>805401</td>
<td>ThaiQR dynamic QRC Payment - Merchant Present Mode (MPM) (SG and MY Merchants)***</td>
</tr>
<tr>
<td>805508</td>
<td>Credit Card: first_data Quick Payment Mode (HK Merchant)</td>
</tr>
<tr>
<td>805514</td>
<td>Credit Card: first_data Security Verification Payment Mode (HK Merchants)</td>
</tr>
<tr>
<td>805601</td>
<td>GoPay dynamic QRC Payment - Merchant Present Mode (MPM)***</td>
</tr>
<tr>
<td>805612</td>
<td>GoPay WAP Payment***</td>
</tr>
</tbody>
</table>
<h2 id="currencies">Currencies<a class="headerlink" href="#currencies" title="Permanent link">&para;</a></h2>
<p>The below listed currencies are currently available in our payment network. Please consult <strong>technical.support@qfpay.global</strong> to verify that your API credentials and selected <code>pay_type</code> support your desired currency.</p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>AED</td>
<td>Arab Emirates Dirham</td>
</tr>
<tr>
<td>CNY</td>
<td>Chinese Yuan</td>
</tr>
<tr>
<td>EUR</td>
<td>Euro</td>
</tr>
<tr>
<td>HKD</td>
<td>Hong Kong Dollar</td>
</tr>
<tr>
<td>IDR</td>
<td>Indonesian Rupiah</td>
</tr>
<tr>
<td>JPY</td>
<td>Japanese Yen</td>
</tr>
<tr>
<td>MMK</td>
<td>Myanmar Kyat</td>
</tr>
<tr>
<td>MYR</td>
<td>Malaysian Ringgit</td>
</tr>
<tr>
<td>SGD</td>
<td>Singapore Dollar</td>
</tr>
<tr>
<td>THB</td>
<td>Thai Baht</td>
</tr>
<tr>
<td>USD</td>
<td>United States Dollar</td>
</tr>
<tr>
<td>CAD</td>
<td>Canadian Dollar</td>
</tr>
<tr>
<td>AUD</td>
<td>Australian Dollar</td>
</tr>
</tbody>
</table>
<h2 id="api-endpoint-for-payments">API Endpoint for Payments<a class="headerlink" href="#api-endpoint-for-payments" title="Permanent link">&para;</a></h2>
<div class="tabbed-set tabbed-alternate" data-tabs="1:5"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><input id="__tabbed_1_3" name="__tabbed_1" type="radio" /><input id="__tabbed_1_4" name="__tabbed_1" type="radio" /><input id="__tabbed_1_5" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">shell</label><label for="__tabbed_1_2">python</label><label for="__tabbed_1_3">java</label><label for="__tabbed_1_4">javascript</label><label for="__tabbed_1_5">php</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>Request<span class="w"> </span>Header:
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="o">{</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">  </span>Content-Type:<span class="w"> </span>application/x-www-form-urlencoded<span class="p">;</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="w">  </span>X-QF-APPCODE:<span class="w"> </span>D5589D2A1F2E42A9A60C37**********
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="w">  </span>X-QF-SIGN:<span class="w"> </span>6FB43AC29175B4602FF95F8332028F19
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="o">}</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>Request<span class="w"> </span>Body:
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="o">{</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="w">  </span><span class="nv">mchid</span><span class="o">=</span>ZaMVg*****<span class="p">&amp;</span><span class="nv">out_trade_no</span><span class="o">=</span><span class="m">01234567890123</span><span class="p">&amp;</span><span class="nv">pay_type</span><span class="o">=</span><span class="m">800101</span><span class="p">&amp;</span><span class="nv">txamt</span><span class="o">=</span><span class="m">10</span><span class="p">&amp;</span><span class="nv">txcurrcd</span><span class="o">=</span>EUR<span class="p">&amp;</span><span class="nv">txdtm</span><span class="o">=</span><span class="m">2019</span>-12-25<span class="w"> </span><span class="m">14</span>:21:28
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="o">}</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="c1">#coding=utf8</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="kn">import</span> <span class="nn">urllib.request</span><span class="o">,</span> <span class="nn">urllib.parse</span><span class="o">,</span> <span class="nn">urllib.error</span><span class="o">,</span> <span class="nn">urllib.request</span><span class="o">,</span> <span class="nn">urllib.error</span><span class="o">,</span> <span class="nn">urllib.parse</span><span class="o">,</span> <span class="nn">hashlib</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="kn">import</span> <span class="nn">requests</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="kn">import</span> <span class="nn">datetime</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="kn">import</span> <span class="nn">string</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="c1"># Enter Client Credentials</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="n">environment</span> <span class="o">=</span> <span class="s1">&#39;https://openapi-test.qfpay.com&#39;</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="n">app_code</span> <span class="o">=</span> <span class="s1">&#39;D5589D2A1F2E42A9A60C37*********&#39;</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="n">client_key</span> <span class="o">=</span> <span class="s1">&#39;0E32A59A8B454940A2FF39**********&#39;</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="c1"># Create parameter values for data payload</span>
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="n">current_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">microsecond</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>                                
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a>
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a><span class="nb">print</span><span class="p">(</span><span class="n">current_time</span><span class="p">)</span>
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a>
<a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a><span class="c1"># Create signature</span>
<a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a><span class="k">def</span> <span class="nf">make_req_sign</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
<a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a>    <span class="n">keys</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a>    <span class="n">keys</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
<a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a>    <span class="n">p</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a>    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span> 
<a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a>        <span class="n">v</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
<a id="__codelineno-1-25" name="__codelineno-1-25" href="#__codelineno-1-25"></a>        <span class="n">p</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">=</span><span class="si">%s</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="p">))</span>
<a id="__codelineno-1-26" name="__codelineno-1-26" href="#__codelineno-1-26"></a>    <span class="n">unsign_str</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;&amp;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">+</span> <span class="n">key</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
<a id="__codelineno-1-27" name="__codelineno-1-27" href="#__codelineno-1-27"></a>    <span class="n">s</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">md5</span><span class="p">(</span><span class="n">unsign_str</span><span class="p">)</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
<a id="__codelineno-1-28" name="__codelineno-1-28" href="#__codelineno-1-28"></a>    <span class="k">return</span> <span class="n">s</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
<a id="__codelineno-1-29" name="__codelineno-1-29" href="#__codelineno-1-29"></a>
<a id="__codelineno-1-30" name="__codelineno-1-30" href="#__codelineno-1-30"></a>
<a id="__codelineno-1-31" name="__codelineno-1-31" href="#__codelineno-1-31"></a><span class="c1"># Body payload</span>
<a id="__codelineno-1-32" name="__codelineno-1-32" href="#__codelineno-1-32"></a><span class="n">txamt</span> <span class="o">=</span> <span class="s1">&#39;10&#39;</span> <span class="c1">#In USD,EUR,etc. Cent</span>
<a id="__codelineno-1-33" name="__codelineno-1-33" href="#__codelineno-1-33"></a><span class="n">txcurrcd</span> <span class="o">=</span> <span class="s1">&#39;EUR&#39;</span>
<a id="__codelineno-1-34" name="__codelineno-1-34" href="#__codelineno-1-34"></a><span class="n">pay_type</span> <span class="o">=</span> <span class="s1">&#39;800101&#39;</span> <span class="c1"># Alipay CPM = 800108 , MPM = 800101</span>
<a id="__codelineno-1-35" name="__codelineno-1-35" href="#__codelineno-1-35"></a><span class="n">auth_code</span><span class="o">=</span><span class="s1">&#39;283854702356157409&#39;</span> <span class="c1">#CPM only</span>
<a id="__codelineno-1-36" name="__codelineno-1-36" href="#__codelineno-1-36"></a><span class="n">out_trade_no</span> <span class="o">=</span> <span class="s1">&#39;01234567890123&#39;</span>
<a id="__codelineno-1-37" name="__codelineno-1-37" href="#__codelineno-1-37"></a><span class="n">txdtm</span> <span class="o">=</span> <span class="n">current_time</span>
<a id="__codelineno-1-38" name="__codelineno-1-38" href="#__codelineno-1-38"></a><span class="n">goods_name</span> <span class="o">=</span> <span class="s1">&#39;test1&#39;</span>   
<a id="__codelineno-1-39" name="__codelineno-1-39" href="#__codelineno-1-39"></a><span class="n">auth_code</span> <span class="o">=</span> <span class="s1">&#39;280438849930815813&#39;</span>
<a id="__codelineno-1-40" name="__codelineno-1-40" href="#__codelineno-1-40"></a><span class="n">mchid</span> <span class="o">=</span> <span class="s1">&#39;ZaMVg*****&#39;</span>
<a id="__codelineno-1-41" name="__codelineno-1-41" href="#__codelineno-1-41"></a><span class="n">key</span> <span class="o">=</span> <span class="n">client_key</span>
<a id="__codelineno-1-42" name="__codelineno-1-42" href="#__codelineno-1-42"></a>
<a id="__codelineno-1-43" name="__codelineno-1-43" href="#__codelineno-1-43"></a>
<a id="__codelineno-1-44" name="__codelineno-1-44" href="#__codelineno-1-44"></a><span class="c1">#data ={&#39;txamt&#39;: txamt, &#39;txcurrcd&#39;: txcurrcd, &#39;pay_type&#39;: pay_type, &#39;out_trade_no&#39;: out_trade_no, &#39;txdtm&#39;: txdtm, &#39;goods_name&#39;: goods_name, &#39;udid&#39;: udid, &#39;auth_code&#39;: auth_code, &#39;mchid&#39;: mchid}</span>
<a id="__codelineno-1-45" name="__codelineno-1-45" href="#__codelineno-1-45"></a><span class="n">data</span> <span class="o">=</span><span class="p">{</span><span class="s1">&#39;txamt&#39;</span><span class="p">:</span> <span class="n">txamt</span><span class="p">,</span> <span class="s1">&#39;txcurrcd&#39;</span><span class="p">:</span> <span class="n">txcurrcd</span><span class="p">,</span> <span class="s1">&#39;pay_type&#39;</span><span class="p">:</span> <span class="n">pay_type</span><span class="p">,</span> <span class="s1">&#39;out_trade_no&#39;</span><span class="p">:</span> <span class="n">out_trade_no</span><span class="p">,</span> <span class="s1">&#39;txdtm&#39;</span><span class="p">:</span> <span class="n">txdtm</span><span class="p">,</span> <span class="s1">&#39;mchid&#39;</span><span class="p">:</span> <span class="n">mchid</span><span class="p">}</span>
<a id="__codelineno-1-46" name="__codelineno-1-46" href="#__codelineno-1-46"></a>
<a id="__codelineno-1-47" name="__codelineno-1-47" href="#__codelineno-1-47"></a><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">environment</span><span class="o">+</span><span class="s2">&quot;/trade/v1/payment&quot;</span><span class="p">,</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span><span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;X-QF-APPCODE&#39;</span><span class="p">:</span><span class="n">app_code</span><span class="p">,</span><span class="s1">&#39;X-QF-SIGN&#39;</span><span class="p">:</span><span class="n">make_req_sign</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">key</span><span class="p">)})</span>
<a id="__codelineno-1-48" name="__codelineno-1-48" href="#__codelineno-1-48"></a>
<a id="__codelineno-1-49" name="__codelineno-1-49" href="#__codelineno-1-49"></a><span class="nb">print</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.text.SimpleDateFormat</span><span class="p">;</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Date</span><span class="p">;</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.HashMap</span><span class="p">;</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Map</span><span class="p">;</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">TestMain</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">args</span><span class="o">[]</span><span class="p">){</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">appcode</span><span class="o">=</span><span class="s">&quot;D5589D2A1F2E42A9A60C37*********&quot;</span><span class="p">;</span>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">key</span><span class="o">=</span><span class="s">&quot;0E32A59A8B454940A2FF39*********&quot;</span><span class="p">;</span>
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">mchid</span><span class="o">=</span><span class="s">&quot;ZaMVg*****&quot;</span><span class="p">;</span>
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a>
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">pay_type</span><span class="o">=</span><span class="s">&quot;800101&quot;</span><span class="p">;</span>
<a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">out_trade_no</span><span class="o">=</span><span class="w"> </span><span class="s">&quot;01234567890123&quot;</span><span class="p">;</span>
<a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a><span class="w">        </span><span class="n">SimpleDateFormat</span><span class="w"> </span><span class="n">df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SimpleDateFormat</span><span class="p">(</span><span class="s">&quot;yyyy-MM-dd HH:mm:ss&quot;</span><span class="p">);</span>
<a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">date</span><span class="o">=</span><span class="n">df</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Date</span><span class="p">());</span>
<a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">txdtm</span><span class="o">=</span><span class="n">date</span><span class="p">;</span>
<a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">txamt</span><span class="o">=</span><span class="s">&quot;10&quot;</span><span class="p">;</span>
<a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">txcurrcd</span><span class="o">=</span><span class="s">&quot;EUR&quot;</span><span class="p">;</span>
<a id="__codelineno-2-19" name="__codelineno-2-19" href="#__codelineno-2-19"></a>
<a id="__codelineno-2-20" name="__codelineno-2-20" href="#__codelineno-2-20"></a><span class="w">        </span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">unsortMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;&gt;</span><span class="p">();</span>
<a id="__codelineno-2-21" name="__codelineno-2-21" href="#__codelineno-2-21"></a><span class="w">        </span><span class="n">unsortMap</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;mchid&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">mchid</span><span class="p">);</span>
<a id="__codelineno-2-22" name="__codelineno-2-22" href="#__codelineno-2-22"></a><span class="w">        </span><span class="n">unsortMap</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;pay_type&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">pay_type</span><span class="p">);</span>
<a id="__codelineno-2-23" name="__codelineno-2-23" href="#__codelineno-2-23"></a><span class="w">        </span><span class="n">unsortMap</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;out_trade_no&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">out_trade_no</span><span class="p">);</span>
<a id="__codelineno-2-24" name="__codelineno-2-24" href="#__codelineno-2-24"></a><span class="w">        </span><span class="n">unsortMap</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;txdtm&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">txdtm</span><span class="p">);</span>
<a id="__codelineno-2-25" name="__codelineno-2-25" href="#__codelineno-2-25"></a><span class="w">        </span><span class="n">unsortMap</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;txamt&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">txamt</span><span class="p">);</span>
<a id="__codelineno-2-26" name="__codelineno-2-26" href="#__codelineno-2-26"></a><span class="w">        </span><span class="n">unsortMap</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;txcurrcd&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">txcurrcd</span><span class="p">);</span>
<a id="__codelineno-2-27" name="__codelineno-2-27" href="#__codelineno-2-27"></a><span class="w">        </span><span class="c1">//unsortMap.put(&quot;product_name&quot;, product_name);</span>
<a id="__codelineno-2-28" name="__codelineno-2-28" href="#__codelineno-2-28"></a><span class="w">        </span><span class="c1">//unsortMap.put(&quot;valid_time&quot;, &quot;300&quot;);</span>
<a id="__codelineno-2-29" name="__codelineno-2-29" href="#__codelineno-2-29"></a>
<a id="__codelineno-2-30" name="__codelineno-2-30" href="#__codelineno-2-30"></a><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">data</span><span class="o">=</span><span class="n">QFPayUtils</span><span class="p">.</span><span class="na">getDataString</span><span class="p">(</span><span class="n">unsortMap</span><span class="p">);</span>
<a id="__codelineno-2-31" name="__codelineno-2-31" href="#__codelineno-2-31"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;Data:\n&quot;</span><span class="o">+</span><span class="n">data</span><span class="o">+</span><span class="n">key</span><span class="p">);</span>
<a id="__codelineno-2-32" name="__codelineno-2-32" href="#__codelineno-2-32"></a><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">md5Sum</span><span class="o">=</span><span class="n">QFPayUtils</span><span class="p">.</span><span class="na">getMd5Value</span><span class="p">(</span><span class="n">data</span><span class="o">+</span><span class="n">key</span><span class="p">);</span>
<a id="__codelineno-2-33" name="__codelineno-2-33" href="#__codelineno-2-33"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;Md5 Value:\n&quot;</span><span class="o">+</span><span class="n">md5Sum</span><span class="p">);</span>
<a id="__codelineno-2-34" name="__codelineno-2-34" href="#__codelineno-2-34"></a>
<a id="__codelineno-2-35" name="__codelineno-2-35" href="#__codelineno-2-35"></a><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">url</span><span class="o">=</span><span class="s">&quot;https://openapi-test.qfpay.com&quot;</span><span class="p">;</span>
<a id="__codelineno-2-36" name="__codelineno-2-36" href="#__codelineno-2-36"></a><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">resp</span><span class="o">=</span><span class="w"> </span><span class="n">Requests</span><span class="p">.</span><span class="na">sendPostRequest</span><span class="p">(</span><span class="n">url</span><span class="o">+</span><span class="s">&quot;/trade/v1/payment&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="n">appcode</span><span class="p">,</span><span class="n">key</span><span class="p">);</span>
<a id="__codelineno-2-37" name="__codelineno-2-37" href="#__codelineno-2-37"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">resp</span><span class="p">);</span>
<a id="__codelineno-2-38" name="__codelineno-2-38" href="#__codelineno-2-38"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-2-39" name="__codelineno-2-39" href="#__codelineno-2-39"></a><span class="p">}</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="c1">// Enter Client Credentials</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="kd">const</span><span class="w"> </span><span class="nx">environment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;https://openapi-test.qfpay.com&#39;</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="kd">const</span><span class="w"> </span><span class="nx">app_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;D5589D2A1F2E42A9A60C37*********&#39;</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="kd">const</span><span class="w"> </span><span class="nx">client_key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;0E32A59A8B454940A2FF39*********&#39;</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="c1">// Generate Timestamp</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="kd">var</span><span class="w"> </span><span class="nx">dateTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">().</span><span class="nx">toISOString</span><span class="p">().</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/T/</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39; &#39;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\..+/</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">dateTime</span><span class="p">)</span>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="c1">// Body Payload</span>
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="kd">const</span><span class="w"> </span><span class="nx">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">client_key</span>
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a><span class="kd">var</span><span class="w"> </span><span class="nx">tradenumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">String</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">1000000000</span><span class="p">))</span>
<a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">tradenumber</span><span class="p">)</span>
<a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a>
<a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a><span class="kd">var</span><span class="w"> </span><span class="nx">payload</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a><span class="s1">&#39;txamt&#39;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;10&#39;</span><span class="p">,</span><span class="w"> </span><span class="c1">// In USD,EUR,etc. Cent</span>
<a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a><span class="s1">&#39;txcurrcd&#39;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;EUR&#39;</span><span class="p">,</span>
<a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a><span class="s1">&#39;pay_type&#39;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;800101&#39;</span><span class="p">,</span><span class="w"> </span><span class="c1">// Alipay CPM = 800108 , MPM = 800101</span>
<a id="__codelineno-3-19" name="__codelineno-3-19" href="#__codelineno-3-19"></a><span class="s1">&#39;out_trade_no&#39;</span><span class="o">:</span><span class="w"> </span><span class="nx">tradenumber</span><span class="p">,</span>
<a id="__codelineno-3-20" name="__codelineno-3-20" href="#__codelineno-3-20"></a><span class="s1">&#39;txdtm&#39;</span><span class="o">:</span><span class="w"> </span><span class="nx">dateTime</span><span class="p">,</span>
<a id="__codelineno-3-21" name="__codelineno-3-21" href="#__codelineno-3-21"></a><span class="s1">&#39;mchid&#39;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;ZaMVg*****&#39;</span>
<a id="__codelineno-3-22" name="__codelineno-3-22" href="#__codelineno-3-22"></a><span class="p">};</span>
<a id="__codelineno-3-23" name="__codelineno-3-23" href="#__codelineno-3-23"></a>
<a id="__codelineno-3-24" name="__codelineno-3-24" href="#__codelineno-3-24"></a><span class="c1">// Signature Generation</span>
<a id="__codelineno-3-25" name="__codelineno-3-25" href="#__codelineno-3-25"></a><span class="kd">const</span><span class="w"> </span><span class="nx">ordered</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{};</span>
<a id="__codelineno-3-26" name="__codelineno-3-26" href="#__codelineno-3-26"></a><span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">payload</span><span class="p">).</span><span class="nx">sort</span><span class="p">().</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-3-27" name="__codelineno-3-27" href="#__codelineno-3-27"></a><span class="w">  </span><span class="nx">ordered</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">payload</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span><span class="w"> </span><span class="p">});</span>
<a id="__codelineno-3-28" name="__codelineno-3-28" href="#__codelineno-3-28"></a><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">ordered</span><span class="p">)</span>
<a id="__codelineno-3-29" name="__codelineno-3-29" href="#__codelineno-3-29"></a>
<a id="__codelineno-3-30" name="__codelineno-3-30" href="#__codelineno-3-30"></a><span class="kd">var</span><span class="w"> </span><span class="nx">str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
<a id="__codelineno-3-31" name="__codelineno-3-31" href="#__codelineno-3-31"></a><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">var</span><span class="w"> </span><span class="nx">p</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nx">ordered</span><span class="p">)</span>
<a id="__codelineno-3-32" name="__codelineno-3-32" href="#__codelineno-3-32"></a><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">ordered</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">p</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-3-33" name="__codelineno-3-33" href="#__codelineno-3-33"></a><span class="nx">str</span><span class="p">.</span><span class="nx">push</span><span class="p">((</span><span class="nx">p</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">&quot;=&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="nx">ordered</span><span class="p">[</span><span class="nx">p</span><span class="p">]));</span>
<a id="__codelineno-3-34" name="__codelineno-3-34" href="#__codelineno-3-34"></a><span class="p">}</span>
<a id="__codelineno-3-35" name="__codelineno-3-35" href="#__codelineno-3-35"></a><span class="kd">var</span><span class="w"> </span><span class="nx">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">str</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;&amp;&quot;</span><span class="p">)</span><span class="o">+</span><span class="nx">client_key</span><span class="p">;</span>
<a id="__codelineno-3-36" name="__codelineno-3-36" href="#__codelineno-3-36"></a><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">string</span><span class="p">)</span>
<a id="__codelineno-3-37" name="__codelineno-3-37" href="#__codelineno-3-37"></a>
<a id="__codelineno-3-38" name="__codelineno-3-38" href="#__codelineno-3-38"></a><span class="kd">const</span><span class="w"> </span><span class="nx">crypto</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;crypto&#39;</span><span class="p">)</span>
<a id="__codelineno-3-39" name="__codelineno-3-39" href="#__codelineno-3-39"></a><span class="kd">var</span><span class="w"> </span><span class="nx">hashed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">crypto</span><span class="p">.</span><span class="nx">createHash</span><span class="p">(</span><span class="s1">&#39;md5&#39;</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">string</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="s1">&#39;hex&#39;</span><span class="p">)</span>
<a id="__codelineno-3-40" name="__codelineno-3-40" href="#__codelineno-3-40"></a><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">hashed</span><span class="p">)</span>
<a id="__codelineno-3-41" name="__codelineno-3-41" href="#__codelineno-3-41"></a>
<a id="__codelineno-3-42" name="__codelineno-3-42" href="#__codelineno-3-42"></a>
<a id="__codelineno-3-43" name="__codelineno-3-43" href="#__codelineno-3-43"></a><span class="c1">// API Request</span>
<a id="__codelineno-3-44" name="__codelineno-3-44" href="#__codelineno-3-44"></a><span class="kd">var</span><span class="w"> </span><span class="nx">request</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;request&quot;</span><span class="p">);</span>
<a id="__codelineno-3-45" name="__codelineno-3-45" href="#__codelineno-3-45"></a><span class="nx">request</span><span class="p">({</span>
<a id="__codelineno-3-46" name="__codelineno-3-46" href="#__codelineno-3-46"></a><span class="w">  </span><span class="nx">uri</span><span class="o">:</span><span class="w"> </span><span class="nx">environment</span><span class="o">+</span><span class="s2">&quot;/trade/v1/payment&quot;</span><span class="p">,</span>
<a id="__codelineno-3-47" name="__codelineno-3-47" href="#__codelineno-3-47"></a><span class="w">  </span><span class="nx">headers</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-3-48" name="__codelineno-3-48" href="#__codelineno-3-48"></a><span class="w">    </span><span class="s1">&#39;X-QF-APPCODE&#39;</span><span class="o">:</span><span class="w"> </span><span class="nx">app_code</span><span class="p">,</span>
<a id="__codelineno-3-49" name="__codelineno-3-49" href="#__codelineno-3-49"></a><span class="w">    </span><span class="s1">&#39;X-QF-SIGN&#39;</span><span class="o">:</span><span class="w"> </span><span class="nx">hashed</span>
<a id="__codelineno-3-50" name="__codelineno-3-50" href="#__codelineno-3-50"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-3-51" name="__codelineno-3-51" href="#__codelineno-3-51"></a><span class="w">  </span><span class="nx">method</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;POST&quot;</span><span class="p">,</span>
<a id="__codelineno-3-52" name="__codelineno-3-52" href="#__codelineno-3-52"></a><span class="w">  </span><span class="nx">form</span><span class="o">:</span><span class="w"> </span><span class="nx">payload</span><span class="p">,</span>
<a id="__codelineno-3-53" name="__codelineno-3-53" href="#__codelineno-3-53"></a><span class="w">  </span><span class="p">},</span><span class="w"> </span>
<a id="__codelineno-3-54" name="__codelineno-3-54" href="#__codelineno-3-54"></a><span class="w">  </span><span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span><span class="w"> </span><span class="nx">response</span><span class="p">,</span><span class="w"> </span><span class="nx">body</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-3-55" name="__codelineno-3-55" href="#__codelineno-3-55"></a><span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<a id="__codelineno-3-56" name="__codelineno-3-56" href="#__codelineno-3-56"></a><span class="p">});</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="cp">&lt;?php</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="nb">ob_start</span><span class="p">();</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>  <span class="k">function</span> <span class="nf">GetRandStr</span><span class="p">(</span><span class="nv">$length</span><span class="p">){</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>  <span class="nv">$str</span><span class="o">=</span><span class="s1">&#39;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789&#39;</span><span class="p">;</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>  <span class="nv">$len</span><span class="o">=</span><span class="nb">strlen</span><span class="p">(</span><span class="nv">$str</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>  <span class="nv">$randstr</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">;</span>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>  <span class="k">for</span><span class="p">(</span><span class="nv">$i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nv">$i</span><span class="o">&lt;</span><span class="nv">$length</span><span class="p">;</span><span class="nv">$i</span><span class="o">++</span><span class="p">){</span>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>  <span class="nv">$num</span><span class="o">=</span><span class="nb">mt_rand</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nv">$len</span><span class="p">);</span>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a>  <span class="nv">$randstr</span> <span class="o">.=</span> <span class="nv">$str</span><span class="p">[</span><span class="nv">$num</span><span class="p">];</span>
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a>  <span class="p">}</span>
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a>  <span class="k">return</span> <span class="nv">$randstr</span><span class="p">;</span>
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a>  <span class="p">}</span>
<a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a>
<a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a>    <span class="nv">$url</span> <span class="o">=</span> <span class="s1">&#39;https://test-openapi-eur.qfapi.com&#39;</span><span class="p">;</span>
<a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a>    <span class="nv">$api_type</span> <span class="o">=</span> <span class="s1">&#39;/trade/v1/payment&#39;</span><span class="p">;</span>
<a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a>    <span class="nv">$pay_type</span> <span class="o">=</span> <span class="s1">&#39;800101&#39;</span><span class="p">;</span>
<a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a>    <span class="c1">//$mchid = &quot;MNxMp11FV35qQN&quot;; //Only agents must provide this parameter</span>
<a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a>    <span class="nv">$app_code</span> <span class="o">=</span> <span class="s1">&#39;FF2FF74F2F2E42769A4A73*********&#39;</span><span class="p">;</span> <span class="c1">//API credentials are provided by QFPay</span>
<a id="__codelineno-4-19" name="__codelineno-4-19" href="#__codelineno-4-19"></a>    <span class="nv">$app_key</span> <span class="o">=</span> <span class="s1">&#39;7BE791E0FD2E48E6926043B*********&#39;</span><span class="p">;</span> <span class="c1">//API credentials are provided by QFPay</span>
<a id="__codelineno-4-20" name="__codelineno-4-20" href="#__codelineno-4-20"></a>    <span class="nv">$now_time</span> <span class="o">=</span> <span class="nb">date</span><span class="p">(</span><span class="s2">&quot;Y-m-d H:i:s&quot;</span><span class="p">);</span> <span class="c1">//Get current date-time</span>
<a id="__codelineno-4-21" name="__codelineno-4-21" href="#__codelineno-4-21"></a>
<a id="__codelineno-4-22" name="__codelineno-4-22" href="#__codelineno-4-22"></a>    <span class="nv">$fields_string</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
<a id="__codelineno-4-23" name="__codelineno-4-23" href="#__codelineno-4-23"></a>    <span class="nv">$fields</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
<a id="__codelineno-4-24" name="__codelineno-4-24" href="#__codelineno-4-24"></a>      <span class="c1">//&#39;mchid&#39; =&gt; urlencode($mchid),</span>
<a id="__codelineno-4-25" name="__codelineno-4-25" href="#__codelineno-4-25"></a>      <span class="s1">&#39;pay_type&#39;</span> <span class="o">=&gt;</span> <span class="nb">urlencode</span><span class="p">(</span><span class="nv">$pay_type</span><span class="p">),</span>
<a id="__codelineno-4-26" name="__codelineno-4-26" href="#__codelineno-4-26"></a>      <span class="s1">&#39;out_trade_no&#39;</span> <span class="o">=&gt;</span> <span class="nb">urlencode</span><span class="p">(</span><span class="nx">GetRandStr</span><span class="p">(</span><span class="mi">20</span><span class="p">)),</span>
<a id="__codelineno-4-27" name="__codelineno-4-27" href="#__codelineno-4-27"></a>      <span class="s1">&#39;txcurrcd&#39;</span> <span class="o">=&gt;</span> <span class="nb">urlencode</span><span class="p">(</span><span class="s1">&#39;EUR&#39;</span><span class="p">),</span>
<a id="__codelineno-4-28" name="__codelineno-4-28" href="#__codelineno-4-28"></a>      <span class="s1">&#39;txamt&#39;</span> <span class="o">=&gt;</span> <span class="nb">urlencode</span><span class="p">(</span><span class="mi">2200</span><span class="p">),</span>
<a id="__codelineno-4-29" name="__codelineno-4-29" href="#__codelineno-4-29"></a>      <span class="s1">&#39;txdtm&#39;</span> <span class="o">=&gt;</span> <span class="nv">$now_time</span>
<a id="__codelineno-4-30" name="__codelineno-4-30" href="#__codelineno-4-30"></a>    <span class="p">);</span>
<a id="__codelineno-4-31" name="__codelineno-4-31" href="#__codelineno-4-31"></a>    <span class="nb">ksort</span><span class="p">(</span><span class="nv">$fields</span><span class="p">);</span> <span class="c1">//Ascending dictionary sorting A-Z</span>
<a id="__codelineno-4-32" name="__codelineno-4-32" href="#__codelineno-4-32"></a>    <span class="nb">print_r</span><span class="p">(</span><span class="nv">$fields</span><span class="p">);</span>
<a id="__codelineno-4-33" name="__codelineno-4-33" href="#__codelineno-4-33"></a>
<a id="__codelineno-4-34" name="__codelineno-4-34" href="#__codelineno-4-34"></a>    <span class="k">foreach</span><span class="p">(</span><span class="nv">$fields</span> <span class="k">as</span> <span class="nv">$key</span><span class="o">=&gt;</span><span class="nv">$value</span><span class="p">)</span> <span class="p">{</span> 
<a id="__codelineno-4-35" name="__codelineno-4-35" href="#__codelineno-4-35"></a>  <span class="nv">$fields_string</span> <span class="o">.=</span> <span class="nv">$key</span><span class="o">.</span><span class="s1">&#39;=&#39;</span><span class="o">.</span><span class="nv">$value</span><span class="o">.</span><span class="s1">&#39;&amp;&#39;</span> <span class="p">;</span>
<a id="__codelineno-4-36" name="__codelineno-4-36" href="#__codelineno-4-36"></a>  <span class="p">}</span>
<a id="__codelineno-4-37" name="__codelineno-4-37" href="#__codelineno-4-37"></a>  <span class="nv">$fields_string</span> <span class="o">=</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$fields_string</span> <span class="p">,</span> <span class="mi">0</span> <span class="p">,</span> <span class="nb">strlen</span><span class="p">(</span><span class="nv">$fields_string</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-4-38" name="__codelineno-4-38" href="#__codelineno-4-38"></a>
<a id="__codelineno-4-39" name="__codelineno-4-39" href="#__codelineno-4-39"></a>  <span class="nv">$sign</span> <span class="o">=</span> <span class="nb">strtoupper</span><span class="p">(</span><span class="nb">md5</span><span class="p">(</span><span class="nv">$fields_string</span> <span class="o">.</span> <span class="nv">$app_key</span><span class="p">));</span>
<a id="__codelineno-4-40" name="__codelineno-4-40" href="#__codelineno-4-40"></a>
<a id="__codelineno-4-41" name="__codelineno-4-41" href="#__codelineno-4-41"></a>  <span class="c1">//// Header ////</span>
<a id="__codelineno-4-42" name="__codelineno-4-42" href="#__codelineno-4-42"></a>  <span class="nv">$header</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
<a id="__codelineno-4-43" name="__codelineno-4-43" href="#__codelineno-4-43"></a>  <span class="nv">$header</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">&#39;X-QF-APPCODE: &#39;</span> <span class="o">.</span> <span class="nv">$app_code</span><span class="p">;</span>
<a id="__codelineno-4-44" name="__codelineno-4-44" href="#__codelineno-4-44"></a>  <span class="nv">$header</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">&#39;X-QF-SIGN: &#39;</span> <span class="o">.</span> <span class="nv">$sign</span><span class="p">;</span>
<a id="__codelineno-4-45" name="__codelineno-4-45" href="#__codelineno-4-45"></a>
<a id="__codelineno-4-46" name="__codelineno-4-46" href="#__codelineno-4-46"></a>  <span class="c1">//Post Data</span>
<a id="__codelineno-4-47" name="__codelineno-4-47" href="#__codelineno-4-47"></a>  <span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<a id="__codelineno-4-48" name="__codelineno-4-48" href="#__codelineno-4-48"></a>  <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$url</span> <span class="o">.</span> <span class="nv">$api_type</span><span class="p">);</span>
<a id="__codelineno-4-49" name="__codelineno-4-49" href="#__codelineno-4-49"></a>  <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-4-50" name="__codelineno-4-50" href="#__codelineno-4-50"></a>  <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="nv">$header</span><span class="p">);</span>
<a id="__codelineno-4-51" name="__codelineno-4-51" href="#__codelineno-4-51"></a>  <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="k">false</span><span class="p">);</span>
<a id="__codelineno-4-52" name="__codelineno-4-52" href="#__codelineno-4-52"></a>  <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POST</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-4-53" name="__codelineno-4-53" href="#__codelineno-4-53"></a>  <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span> <span class="nv">$fields_string</span><span class="p">);</span>
<a id="__codelineno-4-54" name="__codelineno-4-54" href="#__codelineno-4-54"></a>  <span class="nv">$output</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<a id="__codelineno-4-55" name="__codelineno-4-55" href="#__codelineno-4-55"></a>  <span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>    
<a id="__codelineno-4-56" name="__codelineno-4-56" href="#__codelineno-4-56"></a>
<a id="__codelineno-4-57" name="__codelineno-4-57" href="#__codelineno-4-57"></a>  <span class="nv">$final_data</span> <span class="o">=</span> <span class="nb">json_decode</span><span class="p">(</span><span class="nv">$output</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span>
<a id="__codelineno-4-58" name="__codelineno-4-58" href="#__codelineno-4-58"></a>  <span class="nb">print_r</span><span class="p">(</span><span class="nv">$final_data</span><span class="p">);</span>
<a id="__codelineno-4-59" name="__codelineno-4-59" href="#__codelineno-4-59"></a>
<a id="__codelineno-4-60" name="__codelineno-4-60" href="#__codelineno-4-60"></a><span class="nb">ob_end_flush</span><span class="p">();</span>
<a id="__codelineno-4-61" name="__codelineno-4-61" href="#__codelineno-4-61"></a><span class="cp">?&gt;</span>
</code></pre></div>
</div>
</div>
</div>
<h3 id="http-request">HTTP Request<a class="headerlink" href="#http-request" title="Permanent link">&para;</a></h3>
<p><code>POST ../trade/v1/payment</code></p>
<p>Listed below are the most common parameters for the payment endpoint. Please refer to the payment scenario applicable to you for additional parameters.</p>
<h3 id="public-payment-request-parameters">Public Payment Request Parameters<a class="headerlink" href="#public-payment-request-parameters" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Parameter name</th>
<th>Parameter code</th>
<th>Mandatory</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Payment amount</td>
<td><code>txamt</code></td>
<td>Yes</td>
<td>Int(11)</td>
<td>Amount of the transaction. Unit in cents (i.e. 100 = $1)</td>
</tr>
<tr>
<td>Currency</td>
<td><code>txcurrcd</code></td>
<td>Yes</td>
<td>String(3)</td>
<td>Transaction currency. View the <a href="#currencies">Currencies</a> table for a complete list of available currencies</td>
</tr>
<tr>
<td>Payment type</td>
<td><code>pay_type</code></td>
<td>Yes</td>
<td>String(6)</td>
<td>Please refer to the section <a href="#payment-codes">Payment Codes</a> for a complete list of payment types</td>
</tr>
<tr>
<td>API Order Number</td>
<td><code>out_trade_no</code></td>
<td>Yes</td>
<td>String(128)</td>
<td>External transaction number / Merchant platform transaction number: This parameter must be unique for each payment and refund request under the same merchant account in the system.</td>
</tr>
<tr>
<td>Request transaction time</td>
<td><code>txdtm</code></td>
<td>Yes</td>
<td>String(20)</td>
<td>Transaction time format<br> YYYY-MM-DD hh:mm:ss</td>
</tr>
<tr>
<td>Authorization Code</td>
<td><code>auth_code</code></td>
<td>Yes<br> (CPM only)</td>
<td>String(128)</td>
<td>Specifies the authorization code for scanning a barcode/QR Code. The <code>auth_code</code> returned is unique in each authorization. Each <code>auth_code</code> can be used only once and will automatically expire in one day. For testing CPM with Alipay and WeChat Pay the <code>auth_code</code> can be extracted with any QRC reader or manually found in the consumer wallet below the barcode.</td>
</tr>
<tr>
<td>Order expiration time</td>
<td><code>expired_time</code></td>
<td>No<br> (MPM only)</td>
<td>String(3)</td>
<td>QRC expiration time in unit minutes. The default expiration time is 30 minutes. The parameter can manually be adjusted to a minimum of 5 minutes, and up to a maximum of 120 minutes.<br> Available for: <br>800201 - WeChat scan code<br>800101 - Alipay scan code <br>801512 - Alipay Hong Kong WAP payment<br>801501 - Alipay Hong Kong scan code<br>801107 - Alipay overseas WAP payment<br>801101 - Alipay overseas scan code<br>801010 - WeChat Hong Kong APP<br>801510 - Alipay Hong Kong APP</td>
</tr>
<tr>
<td>Product name identification</td>
<td><code>goods_name</code></td>
<td>No</td>
<td>String(64)</td>
<td>Goods Name / Marking: Cannot exceed 20 alphanumeric or contain special characters. Cannot be empty for app payment. Parameter needs to be <strong>UTF-8</strong> encoded if it is written in Chinese characters.</td>
</tr>
<tr>
<td>QF Pay merchant number</td>
<td><code>mchid</code></td>
<td>No</td>
<td>String(16)</td>
<td>May or may not be given to merchant. If MCHID is given, it is mandatory to provide the MCHID .On the contrary, if MCHID is not provided, merchants shall not pass in the MCHID parameter in the API request.</td>
</tr>
<tr>
<td>Time zone</td>
<td><code>txzone</code></td>
<td>No</td>
<td>String(5)</td>
<td>Transaction Time zone: Record of the transaction in local time, default time zone is Beijing time UTC+8 (+0800).</td>
</tr>
<tr>
<td>Device ID</td>
<td><code>udid</code></td>
<td>No</td>
<td>String(40)</td>
<td>Unique transaction device ID. Is displayed on the merchant portal.</td>
</tr>
</tbody>
</table>
<h3 id="public-payment-response-parameters">Public Payment Response Parameters<a class="headerlink" href="#public-payment-response-parameters" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Parameter name</th>
<th>Parameter code</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Payment type</td>
<td><code>pay_type</code></td>
<td>String(6)</td>
<td>Please refer to the section <a href="#payment-codes">Payment Codes</a> for a complete list of payment types</td>
</tr>
<tr>
<td>System transaction time</td>
<td><code>sysdtm</code></td>
<td>String(20)</td>
<td>FormatYYYY-MM-DD hh:mm:ss <br> This parameter value is used as the cut-off time for settlements.</td>
</tr>
<tr>
<td>Request transaction time</td>
<td><code>txdtm</code></td>
<td>String(20)</td>
<td>FormatYYYY-MM-DD hh:mm:ss</td>
</tr>
<tr>
<td>Response message</td>
<td><code>resperr</code></td>
<td>String(128)</td>
<td></td>
</tr>
<tr>
<td>Payment amount</td>
<td><code>txamt</code></td>
<td>Int(11)</td>
<td></td>
</tr>
<tr>
<td>Other message information</td>
<td><code>respmsg</code></td>
<td>String(128)</td>
<td></td>
</tr>
<tr>
<td>External transaction number</td>
<td><code>out_trade_no</code></td>
<td>String(128)</td>
<td>External transaction number</td>
</tr>
<tr>
<td>QFPay transaction number</td>
<td><code>syssn</code></td>
<td>String(40)</td>
<td></td>
</tr>
<tr>
<td>Wallet/Channel transaction number</td>
<td><code>chnlsn</code></td>
<td>String</td>
<td></td>
</tr>
<tr>
<td>Return code</td>
<td><code>respcd</code></td>
<td>String(4)</td>
<td>0000 = Request successful. <br> 1143/1145 = merchants are required to continue to query the transaction result. <br> All other return codes indicate transaction failure. Please refer to the page <a href="#transaction-status-codes">Transaction Status Codes</a> for a complete list of response codes.</td>
</tr>
</tbody>
</table>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="p">{</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="w">    </span><span class="nt">&quot;txdtm&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2019-12-25 14:21:28&quot;</span><span class="p">,</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="w">    </span><span class="nt">&quot;qrcode&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://qr.alipay.com/bax01781r3pu4fjaqazt4091&quot;</span><span class="p">,</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="w">    </span><span class="nt">&quot;pay_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;800101&quot;</span><span class="p">,</span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="w">    </span><span class="nt">&quot;resperr&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;success&quot;</span><span class="p">,</span>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="w">    </span><span class="nt">&quot;out_trade_no&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;01234567890123&quot;</span><span class="p">,</span>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="w">    </span><span class="nt">&quot;syssn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;20191225000200020060996533&quot;</span><span class="p">,</span>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="w">    </span><span class="nt">&quot;sysdtm&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2019-12-25 14:22:37&quot;</span><span class="p">,</span>
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="w">    </span><span class="nt">&quot;paydtm&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2019-12-25 14:22:37&quot;</span><span class="p">,</span>
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="w">    </span><span class="nt">&quot;txcurrcd&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;EUR&quot;</span><span class="p">,</span>
<a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a><span class="w">    </span><span class="nt">&quot;respmsg&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a><span class="w">    </span><span class="nt">&quot;cardcd&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="w">    </span><span class="nt">&quot;udid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;qiantai2&quot;</span><span class="p">,</span>
<a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a><span class="w">    </span><span class="nt">&quot;txamt&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;10&quot;</span><span class="p">,</span>
<a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a><span class="w">    </span><span class="nt">&quot;respcd&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0000&quot;</span><span class="p">,</span>
<a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a><span class="w">    </span><span class="nt">&quot;chnlsn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a><span class="p">}</span>
</code></pre></div>
<h2 id="transaction-status-codes">Transaction Status Codes<a class="headerlink" href="#transaction-status-codes" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th>Return code</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>0000</td>
<td>Transaction successful</td>
</tr>
<tr>
<td>1100</td>
<td>System under maintenance (1100)</td>
</tr>
<tr>
<td>1101</td>
<td>Reversal error (1101)</td>
</tr>
<tr>
<td>1102</td>
<td>Duplicate request (1102)</td>
</tr>
<tr>
<td>1103</td>
<td>Request format error (1103)</td>
</tr>
<tr>
<td>1104</td>
<td>Request parameter error (1104)</td>
</tr>
<tr>
<td>1105</td>
<td>Device not activated (1105)</td>
</tr>
<tr>
<td>1106</td>
<td>Invalid device (1106)</td>
</tr>
<tr>
<td>1107</td>
<td>Device not allowed (1107)</td>
</tr>
<tr>
<td>1108</td>
<td>Signature error (1108)</td>
</tr>
<tr>
<td>1125</td>
<td>Transaction has been refunded already (1125)</td>
</tr>
<tr>
<td>1136</td>
<td>The transaction does not exist or is not operational (1136)</td>
</tr>
<tr>
<td>1142</td>
<td>Order already closed (1142)</td>
</tr>
<tr>
<td>1143</td>
<td>The order has not been paid for, the password is currently being entered (1143)</td>
</tr>
<tr>
<td>1145</td>
<td>Please wait while processing (1145)</td>
</tr>
<tr>
<td>1147</td>
<td>Wechat pay transaction error (1147)</td>
</tr>
<tr>
<td>1150</td>
<td>Your billing method is T0 and does not support canceling transactions. (1150)</td>
</tr>
<tr>
<td>1155</td>
<td>Refund request denied (1155)</td>
</tr>
<tr>
<td>1181</td>
<td>Order expired (1181)</td>
</tr>
<tr>
<td>1201</td>
<td>Insufficient balance, please use a different payment method (1201)</td>
</tr>
<tr>
<td>1202</td>
<td>Incorrect or expired payment code, please show the correct payment code or refresh the payment code and retry (1202)</td>
</tr>
<tr>
<td>1203</td>
<td>Merchant account esrror, confirm that the payment account is configured correctly (1203)</td>
</tr>
<tr>
<td>1204</td>
<td>Bank error, confirm that the payment wallet is functionable (1204)</td>
</tr>
<tr>
<td>1205</td>
<td>The transaction failed. Please try again later (1205)</td>
</tr>
<tr>
<td>1212</td>
<td>Please use the UnionPay overseas payment code (1212)</td>
</tr>
<tr>
<td>1241</td>
<td>The store does not exist or the status is incorrect. Do not conduct payments (1241)</td>
</tr>
<tr>
<td>1242</td>
<td>The store has not been configured correctly, unable to conduct payments (1242)</td>
</tr>
<tr>
<td>1243</td>
<td>The store has been disabled. Do not conduct payments, contact the owner to confirm (1243)</td>
</tr>
<tr>
<td>1250</td>
<td>The transaction is forbidden. For more information please contact QFPay Customer Service Team (1250)</td>
</tr>
<tr>
<td>1251</td>
<td>The store has not been configured correctly, we are currently working to fix this problem (1251)</td>
</tr>
<tr>
<td>1252</td>
<td>System error when making the order request (1252)</td>
</tr>
<tr>
<td>1254</td>
<td>A problem occured. We are currently resolving the issue (1254)</td>
</tr>
<tr>
<td>1260</td>
<td>The order has already been paid for, please confirm the transaction result before conducting more transactions (1260)</td>
</tr>
<tr>
<td>1261</td>
<td>The order has not been paid for, please confirm the transaction result before conducting more transactions (1261)</td>
</tr>
<tr>
<td>1262</td>
<td>The order has been refunded, please confirm the order status before conducting more transactions (1262)</td>
</tr>
<tr>
<td>1263</td>
<td>The order has been cancelled, please confirm the order status before conducting more transactions (1263)</td>
</tr>
<tr>
<td>1264</td>
<td>The order has been closed, please confirm the order status before conducting more transactions (1264)</td>
</tr>
<tr>
<td>1265</td>
<td>The transaction cannot be refunded. Refunds for transactions between 11:30pm to 0:30am and special promotions cannot be processed. (1265)</td>
</tr>
<tr>
<td>1266</td>
<td>The transaction amount is wrong, please confirm the order status (1266)</td>
</tr>
<tr>
<td>1267</td>
<td>The order information does not match, please confirm the order status (1267)</td>
</tr>
<tr>
<td>1268</td>
<td>The order does not exist, please confirm the order status (1268)</td>
</tr>
<tr>
<td>1269</td>
<td>Today's unsettled transaction amount is insufficient. Refunds cannot be processed. Please confirm that the balance is sufficient (1269)</td>
</tr>
<tr>
<td>1270</td>
<td>This currency does not support partial refunds (1270)</td>
</tr>
<tr>
<td>1271</td>
<td>The selected transaction does not support partial refunds (1271)</td>
</tr>
<tr>
<td>1272</td>
<td>The refund amount is greater than the maximum amount that can be refunded for the original transaction (1272)</td>
</tr>
<tr>
<td>1294</td>
<td>The transaction may be non-compliant and has been prohibited by the bank (1294)</td>
</tr>
<tr>
<td>1295</td>
<td>The connection is slow, waiting for a network response (1295)</td>
</tr>
<tr>
<td>1296</td>
<td>The connection is slow, waiting for a network response. Please try again later or use other payment methods (1296)</td>
</tr>
<tr>
<td>1297</td>
<td>The banking system is busy. Please try again later or use other payment methods (1297)</td>
</tr>
<tr>
<td>1298</td>
<td>The connection is slow, waiting for a network response. In case you have already paid, do not repeat the payment. Please confirm the result later (1298)</td>
</tr>
<tr>
<td>2005</td>
<td>The customer payment code is incorrect or has expired, please refresh and restart the transaction process (2005)</td>
</tr>
<tr>
<td>2011</td>
<td>Transaction serial number repeats (2011)</td>
</tr>
</tbody>
</table>







  
    
  
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1-2.1-2M12.5 7v5.2l4 2.4-1 1L11 13V7h1.5M11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2v1.8Z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2023-12-27</span>
  </span>

    
    
    
    
  </aside>


  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.tabs", "navigation.sections", "navigation.top", "toc.follow", "toc.integrate"], "search": "../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.d7c377c4.min.js"></script>
      
        <script src="https://unpkg.com/tablesort@5.3.0/dist/tablesort.min.js"></script>
      
        <script src="../../javascripts/tablesort.js"></script>
      
    
  </body>
</html>